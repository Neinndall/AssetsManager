<UserControl x:Class="AssetsManager.Views.Settings.AdvancedSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="850">

    <UserControl.Resources>
        <x:Array x:Key="UpdateFrequencies" Type="{x:Type System:Int32}">
            <System:Int32>1</System:Int32>
            <System:Int32>10</System:Int32>
            <System:Int32>30</System:Int32>
            <System:Int32>60</System:Int32>
        </x:Array>
    </UserControl.Resources>

    <StackPanel>
        <!-- Page Header -->
        <StackPanel Margin="0,0,0,24">
            <TextBlock Text="Advanced Settings" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Foreground="{StaticResource TextPrimary}"
                       Margin="0,0,0,4"/>
            <TextBlock Text="Performance and advanced configuration options" 
                       FontSize="14" 
                       Foreground="{StaticResource TextSecondary}"/>
        </StackPanel>

        <!-- SECTION 1: Asset Tracker -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="TimerCogOutline" 
                                                   Foreground="{StaticResource AccentOrange}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="Asset Tracker" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Configure background search frequency" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox x:Name="EnableAssetTrackerCheckBox"
                              IsChecked="{Binding Settings.AssetTrackerTimer, Mode=TwoWay}"
                              Content="Automatic CDN asset tracking"
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Automatically check for and discover new assets on Riot's CDN"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,12" 
                               TextWrapping="Wrap"/>

                    <!-- Interval Settings Container -->
                    <StackPanel Margin="28,0,0,0">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=EnableAssetTrackerCheckBox}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="Search Interval" 
                                           Foreground="{StaticResource TextSecondary}" 
                                           FontSize="13"/>
                                <TextBlock Text="Time in minutes between checks"
                                           Foreground="{StaticResource TextMuted}" 
                                           FontSize="11"/>
                            </StackPanel>
                            <ComboBox Grid.Column="1"
                                      SelectedItem="{Binding Settings.AssetTrackerFrequency, Mode=TwoWay}" 
                                      Width="100" 
                                      Style="{StaticResource ModernComboBox}"
                                      ItemsSource="{StaticResource UpdateFrequencies}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 2: PBE Status -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="LanPending"
                                                   Foreground="{StaticResource AccentPurple}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="PBE Status"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Get notifications about PBE status"
                                   FontSize="12"
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox x:Name="EnablePbeStatusCheckBox"
                              IsChecked="{Binding Settings.CheckPbeStatus, Mode=TwoWay}"
                              Content="Automatic PBE status alerts"
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Stay updated on PBE maintenance and server status changes"
                               Foreground="{StaticResource TextMuted}"
                               FontSize="12"
                               Margin="28,4,0,12"
                               TextWrapping="Wrap"/>

                    <!-- Interval Settings Container -->
                    <StackPanel Margin="28,0,0,0">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=EnablePbeStatusCheckBox}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="Check Interval"
                                           Foreground="{StaticResource TextSecondary}"
                                           FontSize="13"/>
                                <TextBlock Text="Time in minutes between checks"
                                           Foreground="{StaticResource TextMuted}"
                                           FontSize="11"/>
                            </StackPanel>
                            <ComboBox Grid.Column="1"
                                      SelectedItem="{Binding Settings.PbeStatusFrequency, Mode=TwoWay}" 
                                      Width="100" 
                                      Style="{StaticResource ModernComboBox}"
                                      ItemsSource="{StaticResource UpdateFrequencies}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 3: API Settings -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="Api"
                                                   Foreground="{StaticResource AccentGreen}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="API Settings"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Configure client for API authentication"
                                   FontSize="12"
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox IsChecked="{Binding Settings.ApiSettings.UsePbeForApi, Mode=TwoWay}"
                              Content="Authenticate via PBE Client"
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Use PBE client credentials for LCU API authentication"
                               Foreground="{StaticResource TextMuted}"
                               FontSize="12"
                               Margin="28,4,0,0"
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 4: Application Behavior -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="ApplicationCog" 
                                                   Foreground="{StaticResource AccentBlue}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="Application Behavior" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Customize how the application opens and closes" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox IsChecked="{Binding Settings.MinimizeToTrayOnClose, Mode=TwoWay}" 
                              Content="Minimize to system tray on close" 
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Keep the app running in the background when the window is closed"
                               Foreground="{StaticResource TextMuted}"
                               FontSize="12"
                               Margin="28,4,0,0"
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>