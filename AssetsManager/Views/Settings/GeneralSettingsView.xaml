<UserControl x:Class="AssetsManager.Views.Settings.GeneralSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="800">

    <UserControl.Resources>
        <x:Array x:Key="UpdateFrequencies" Type="{x:Type System:Int32}">
            <System:Int32>1</System:Int32>
            <System:Int32>10</System:Int32>
            <System:Int32>30</System:Int32>
            <System:Int32>60</System:Int32>
        </x:Array>
    </UserControl.Resources>

    <StackPanel>
        <!-- MODERN INTEGRATED HEADER (Compact) -->
        <Border Margin="0,0,0,20" Background="{StaticResource CardBackground}" CornerRadius="12" Padding="20,14" BorderBrush="{StaticResource BorderColor}" BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="{StaticResource HoverColor}" CornerRadius="10" Width="44" Height="44" Margin="0,0,16,0">
                    <materialIcons:MaterialIcon Kind="CogOutline" Width="22" Height="22" Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>

                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="General Settings" FontSize="20" FontWeight="Bold" Foreground="{StaticResource TextPrimary}"/>
                    <TextBlock Text="Configure basic application behavior and synchronization options" FontSize="11" Foreground="{StaticResource TextSecondary}" Margin="0,1,0,0"/>
                </StackPanel>

                <!-- Subtle Decorative Background Icon -->
                <materialIcons:MaterialIcon Grid.Column="1" Kind="Database" Width="64" Height="64" Foreground="{StaticResource AccentBrush}" Opacity="0.05" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,-8,0"/>
            </Grid>
        </Border>

        <!-- SECTION 1: Data & History -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="Database" 
                                                   Foreground="{StaticResource AccentPurple}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="Data and History" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Manage data synchronization and saving differences" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>
                
                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox IsChecked="{Binding Settings.SyncHashesWithCDTB, Mode=TwoWay}" 
                              Content="Synchronization with CDTB" 
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Automatically sync with the latest hash database from CDTB servers"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,12" 
                               TextWrapping="Wrap"/>

                    <CheckBox IsChecked="{Binding Settings.SaveDiffHistory, Mode=TwoWay}" 
                              Content="Save differences history"
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Save a history of all JSON file differences detected during updates"
                               Foreground="{StaticResource TextMuted}"
                               FontSize="12"
                               Margin="28,4,0,0"
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 2: Automatic Checks -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="Sync" 
                                                   Foreground="{StaticResource AccentBrush}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="Automatic Checks" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Configure what to look for and how often" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox x:Name="checkBoxBackgroundUpdates" 
                              IsChecked="{Binding Settings.BackgroundUpdates, Mode=TwoWay}"
                              Content="Background updates" 
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Periodically check for updates while the application is running"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,12" 
                               TextWrapping="Wrap"/>

                    <!-- Frequency Selector -->
                    <StackPanel Margin="28,0,0,16">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=checkBoxBackgroundUpdates}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <TextBlock Text="Update Interval" 
                                           Foreground="{StaticResource TextSecondary}" 
                                           FontSize="13"/>
                                <TextBlock Text="Time in minutes between checks"
                                           Foreground="{StaticResource TextMuted}" 
                                           FontSize="11"/>
                            </StackPanel>
                            <ComboBox Grid.Column="1"
                                      SelectedItem="{Binding Settings.UpdateCheckFrequency, Mode=TwoWay}" 
                                      Width="100" 
                                      Style="{StaticResource ModernComboBox}"
                                      ItemsSource="{StaticResource UpdateFrequencies}"/>
                        </Grid>
                    </StackPanel>

                    <CheckBox IsChecked="{Binding Settings.CheckJsonDataUpdates, Mode=TwoWay}" 
                              Content="Check for files updates" 
                              Style="{StaticResource ModernCheckBox}"/>
                    <TextBlock Text="Check for updates to json files and their differences"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,0" 
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 3: File Management -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="FolderSync" 
                                                   Foreground="{StaticResource AccentGreen}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="File Management" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Manage asset extraction and organization" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox IsChecked="{Binding Settings.EnableExtraction, Mode=TwoWay}"
                              x:Name="EnableExtractionCheckBox"
                              Content="Auto-extract new files">
                        <CheckBox.Style>
                            <Style TargetType="CheckBox" BasedOn="{StaticResource ModernCheckBox}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ElementName=ReportGenerationCheckBox, Path=IsChecked}" Value="True">
                                        <Setter Property="IsEnabled" Value="False"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </CheckBox.Style>
                    </CheckBox>
                    <TextBlock Text="Extract found files after comparison to AssetsDownloaded folder"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,12" 
                               TextWrapping="Wrap"/>

                    <CheckBox IsChecked="{Binding Settings.OrganizeExtractedAssets, Mode=TwoWay}"
                              Content="Organize extracted files into folders">
                        <CheckBox.Style>
                            <Style TargetType="CheckBox" BasedOn="{StaticResource ModernCheckBox}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ElementName=EnableExtractionCheckBox, Path=IsChecked}" Value="False">
                                        <Setter Property="IsEnabled" Value="False"/>
                                        <Setter Property="IsChecked" Value="False"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </CheckBox.Style>
                    </CheckBox>
                    <TextBlock Text="If enabled, extracted assets will be organized into folders"
                               Foreground="{StaticResource TextMuted}"
                               FontSize="12" 
                               Margin="28,4,0,0" 
                               TextWrapping="Wrap"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- SECTION 4: Report Generation -->
        <Border Style="{StaticResource SettingsCard}">
            <StackPanel>
                <!-- Header -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Background="{StaticResource HoverColor}" CornerRadius="8" Width="40" Height="40">
                        <materialIcons:MaterialIcon Kind="FileDocumentOutline" 
                                                   Foreground="{StaticResource TextPrimary}"
                                                   Width="20" Height="20"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                        <TextBlock Text="Report Generation" 
                                   FontSize="16" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="Generate a log file with asset changes after a comparison" 
                                   FontSize="12" 
                                   Foreground="{StaticResource TextMuted}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Content -->
                <StackPanel Margin="20,0,0,0">
                    <CheckBox x:Name="ReportGenerationCheckBox"
                              IsChecked="{Binding Settings.ReportGeneration.Enabled, Mode=TwoWay}" 
                              Content="Generate asset report">
                        <CheckBox.Style>
                            <Style TargetType="CheckBox" BasedOn="{StaticResource ModernCheckBox}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ElementName=EnableExtractionCheckBox, Path=IsChecked}" Value="True">
                                        <Setter Property="IsEnabled" Value="False"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </CheckBox.Style>
                    </CheckBox>
                    <TextBlock Text="An assets.log file will be created instead of extracting the assets"
                               Foreground="{StaticResource TextMuted}" 
                               FontSize="12" 
                               Margin="28,4,0,12" 
                               TextWrapping="Wrap"/>

                    <!-- Filter Options -->
                    <StackPanel Margin="28,0,0,0">
                        <StackPanel.Style>
                            <Style TargetType="StackPanel">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsChecked, ElementName=ReportGenerationCheckBox}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </StackPanel.Style>
                        
                        <TextBlock Text="Include in report:" 
                                   Foreground="{StaticResource TextSecondary}" 
                                   FontSize="12" 
                                   Margin="0,0,0,8"/>
                        
                        <StackPanel Orientation="Horizontal">
                            <CheckBox IsChecked="{Binding Settings.ReportGeneration.FilterNew, Mode=TwoWay}" 
                                      Content="New" 
                                      Style="{StaticResource ModernCheckBox}"
                                      Margin="0,0,20,0"/>
                            <CheckBox IsChecked="{Binding Settings.ReportGeneration.FilterModified, Mode=TwoWay}" 
                                      Content="Modified" 
                                      Style="{StaticResource ModernCheckBox}"
                                      Margin="0,0,20,0"/>
                            <CheckBox IsChecked="{Binding Settings.ReportGeneration.FilterRenamed, Mode=TwoWay}" 
                                      Content="Renamed" 
                                      Style="{StaticResource ModernCheckBox}"
                                      Margin="0,0,20,0"/>
                            <CheckBox IsChecked="{Binding Settings.ReportGeneration.FilterRemoved, Mode=TwoWay}" 
                                      Content="Removed" 
                                      Style="{StaticResource ModernCheckBox}"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>