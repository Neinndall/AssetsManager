<UserControl x:Class="AssetsManager.Views.Controls.Models.ModelPanelControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="250">
             
    <Border Grid.Column="2"
            Background="{StaticResource CardBackground}"
            BorderBrush="{StaticResource BorderColor}"
            BorderThickness="1"
            Padding="10"
            Margin="0,5,5,5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TabControl Grid.Row="0" Style="{StaticResource CustomTabControlStyle}">
                <TabItem Header="Meshes">
                    <ListBox x:Name="MeshesListBox" 
                             Background="{StaticResource SidebarBackground}"
                             BorderThickness="1"
                             BorderBrush="{StaticResource BorderColor}"
                             ItemContainerStyle="{StaticResource ListBoxItemStyle}"
                             Padding="0,0,0,0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,0,0,4" Padding="0,6,0,6">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Center">
                                            <CheckBox Style="{StaticResource ModernCheckBox}" IsChecked="{Binding IsVisible, Mode=TwoWay}" VerticalAlignment="Center" Margin="10,0,5,0"/>
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold" VerticalAlignment="Center" Foreground="{StaticResource TextPrimary}"/>
                                        </StackPanel>

                                        <Grid Grid.Row="1" Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Text="Texture:" FontSize="10" Foreground="Gray" VerticalAlignment="Center" Margin="10,0,2,0"/>
                                            <ComboBox Grid.Column="1" Style="{StaticResource ModernComboBox}"
                                                      ItemsSource="{Binding AvailableTextureNames}"
                                                      SelectedItem="{Binding SelectedTextureName}"
                                                      Margin="0,0,10,0"/>
                                        </Grid>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </TabItem>
                <TabItem Header="Animations">
                    <ListBox x:Name="AnimationsListBox"
                             Background="{StaticResource SidebarBackground}"
                             BorderThickness="1"
                             BorderBrush="{StaticResource BorderColor}"
                             ItemContainerStyle="{StaticResource ListBoxItemStyle}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding}" VerticalAlignment="Center" Margin="10,0,0,0" Foreground="{StaticResource TextPrimary}"/>
                                    <Button Grid.Column="1" x:Name="PlayButton"
                                            Click="PlayButton_Click"
                                            Tag="{Binding}"
                                            ToolTip="Play Animation"
                                            Margin="5,0,0,0">
                                        <Button.Style>
                                            <Style TargetType="Button" BasedOn="{StaticResource IconButton}">
                                                <Setter Property="Background" Value="White"/>
                                                <Setter Property="Foreground" Value="Green"/>
                                            </Style>
                                        </Button.Style>
                                        <materialDesign:MaterialIcon Kind="Play" Width="14" Height="14"/>
                                    </Button>
                                    <Button Grid.Column="2" x:Name="StopButton"
                                            Click="StopButton_Click"
                                            Tag="{Binding}"
                                            ToolTip="Pause/Resume"
                                            Margin="5,0,5,0">
                                        <Button.Style>
                                            <Style TargetType="Button" BasedOn="{StaticResource IconButton}">
                                                <Setter Property="Foreground" Value="Red"/>
                                            </Style>
                                        </Button.Style>
                                        <materialDesign:MaterialIcon Kind="Pause" Width="14" Height="14"/>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </TabItem>
                <TabItem Header="Models">
                    <ListBox x:Name="ModelsListBox"
                             Background="{StaticResource SidebarBackground}"
                             BorderThickness="1"
                             BorderBrush="{StaticResource BorderColor}"
                             ItemContainerStyle="{StaticResource ListBoxItemStyle}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" VerticalAlignment="Center" Margin="10,0,0,0" Foreground="{StaticResource TextPrimary}"/>
                                    <Button Grid.Column="1" x:Name="DeleteModelButton"
                                            Click="DeleteModelButton_Click"
                                            Tag="{Binding}"
                                            ToolTip="Delete Model"
                                            Margin="5,0,5,0">
                                        <Button.Style>
                                            <Style TargetType="Button" BasedOn="{StaticResource IconButton}">
                                                <Setter Property="Background" Value="{StaticResource AccentRed}"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Style>
                                        </Button.Style>
                                        <materialDesign:MaterialIcon Kind="TrashCan" Width="14" Height="14"/>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </TabItem>
                <TabItem Header="Settings">
                    <StackPanel Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <materialDesign:MaterialIcon Kind="Construction"
                                                     Height="48"
                                                     Width="48"
                                                     Foreground="{StaticResource TextMuted}"
                                                     Opacity="0.5"
                                                     Margin="0,0,0,10"/>
                        <TextBlock Text="Under Construction"
                                   FontSize="18"
                                   Foreground="{StaticResource TextMuted}"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </TabItem>
            </TabControl>
            
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                <Button x:Name="LoadModelButton"
                        Content="Load Model"
                        Style="{StaticResource SecondaryButton}"
                        Click="LoadModelButton_Click"/>

                <Button x:Name="LoadAnimationButton"
                        Content="Load Animations"
                        Style="{StaticResource SecondaryButton}"
                        Click="LoadAnimationButton_Click"
                        Margin="10,0,0,0"/>

                <Button x:Name="ScreenshotButton" 
                        Content="Screenshot"
                        Style="{StaticResource SecondaryButton}"
                        Click="ScreenshotButton_Click"
                        Margin="10,0,0,0"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>