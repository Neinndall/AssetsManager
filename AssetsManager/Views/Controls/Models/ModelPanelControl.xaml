<UserControl x:Class="AssetsManager.Views.Controls.Models.ModelPanelControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="250">
             
    <Border Grid.Column="2"
            Background="{StaticResource CardBackground}"
            BorderBrush="{StaticResource BorderColor}"
            BorderThickness="1"
            Padding="10"
            Margin="0,5,5,5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TabControl Grid.Row="0" Style="{StaticResource CustomTabControlStyle}">
                <TabItem Header="Meshes">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl x:Name="MeshesItemsControl">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <GroupBox Style="{StaticResource SettingsGroupBoxStyle}" Padding="10" Margin="0,0,0,5">
                                        <GroupBox.Header>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <CheckBox Grid.Column="0" Style="{StaticResource ModernCheckBox}" IsChecked="{Binding IsVisible, Mode=TwoWay}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                                <TextBlock Grid.Column="1" Text="{Binding Name}" FontWeight="Bold" VerticalAlignment="Center" Foreground="{StaticResource TextPrimary}"/>
                                            </Grid>
                                        </GroupBox.Header>

                                        <Grid Margin="0,4,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Text="Texture:" FontSize="10" Foreground="Gray" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <ComboBox Grid.Column="1" Style="{StaticResource ModernComboBox}"
                                                      ItemsSource="{Binding AvailableTextureNames}"
                                                      SelectedItem="{Binding SelectedTextureName}"
                                                      Margin="0,0,0,0"/>
                                        </Grid>
                                    </GroupBox>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="Animations">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                        <ItemsControl x:Name="AnimationsListBox">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <GroupBox Style="{StaticResource SettingsGroupBoxStyle}" Padding="10" Margin="0,0,0,5">
                                        <GroupBox.Header>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="{Binding Name}" FontWeight="Bold" VerticalAlignment="Center"/>
                                                <Button Grid.Column="1" x:Name="PlayButton" Click="PlayButton_Click" Tag="{Binding}" ToolTip="Play Animation" Margin="5,0,0,0">
                                                    <Button.Style>
                                                        <Style TargetType="Button" BasedOn="{StaticResource IconButton}"/>
                                                    </Button.Style>
                                                    <materialIcons:MaterialIcon Kind="Play" Width="14" Height="14" Foreground="Green"/>
                                                </Button>
                                                <Button Grid.Column="2" x:Name="StopButton" Click="StopButton_Click" Tag="{Binding}" ToolTip="Pause/Resume" Margin="5,0,0,0">
                                                    <Button.Style>
                                                        <Style TargetType="Button" BasedOn="{StaticResource IconButton}"/>
                                                    </Button.Style>
                                                    <materialIcons:MaterialIcon Kind="Pause" Width="14" Height="14" Foreground="Red"/>
                                                </Button>
                                            </Grid>
                                        </GroupBox.Header>

                                        <StackPanel>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="120"/>
                                                </Grid.ColumnDefinitions>
                                                <materialIcons:MaterialIcon Grid.Column="0" Kind="ClockOutline" Width="14" Height="14" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                                <Slider Grid.Column="1" Maximum="{Binding TotalDuration}" Value="{Binding CurrentTime, Mode=TwoWay}" Thumb.DragStarted="AnimationSlider_DragStarted" Thumb.DragCompleted="AnimationSlider_DragCompleted" ValueChanged="AnimationSlider_ValueChanged" Tag="{Binding}" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="{Binding ProgressText}" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextMuted}" FontSize="10"/>
                                            </Grid>

                                            <Grid Margin="0,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="120"/>
                                                </Grid.ColumnDefinitions>
                                                <materialIcons:MaterialIcon Grid.Column="0" Kind="Speedometer" Width="14" Height="14" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                                <Slider Grid.Column="1" Minimum="0.1" Maximum="4.0" Value="{Binding Speed, Mode=TwoWay}" VerticalAlignment="Center"/>
                                                <TextBlock Grid.Column="2" Text="{Binding Speed, StringFormat='Speed: {0:F1}x'}" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextMuted}" FontSize="10"/>
                                            </Grid>
                                        </StackPanel>
                                    </GroupBox>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </TabItem>
                <TabItem Header="Models">
                    <ListBox x:Name="ModelsListBox"
                             Style="{StaticResource SmoothScrollListBox}"
                             SelectionChanged="ModelsListBox_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding Name}" VerticalAlignment="Center" Margin="10,0,0,0" Foreground="{StaticResource TextPrimary}"/>
                                    <Button Grid.Column="1" x:Name="DeleteModelButton"
                                            Click="DeleteModelButton_Click"
                                            Tag="{Binding}"
                                            ToolTip="Delete Model"
                                            Margin="5,0,5,0">
                                        <Button.Style>
                                            <Style TargetType="Button" BasedOn="{StaticResource IconButton}">
                                                <Setter Property="Background" Value="{StaticResource AccentRed}"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Style>
                                        </Button.Style>
                                        <materialIcons:MaterialIcon Kind="TrashCan" Width="14" Height="14"/>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </TabItem>
                <TabItem Header="Transform">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="5">
                            <!-- Position -->
                            <GroupBox Style="{StaticResource SettingsGroupBoxStyle}" Margin="0,0,0,10">
                                <GroupBox.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Position"/>
                                        <Button Grid.Column="1" x:Name="ResetPositionButton" Style="{StaticResource TransparentIconButton}" ToolTip="Reset Position" Click="ResetPosition_Click">
                                            <materialIcons:MaterialIcon Kind="Refresh" Width="14" Height="14"/>
                                        </Button>
                                    </Grid>
                                </GroupBox.Header>
                                <StackPanel>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="ArrowRight" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="PositionXSlider" Minimum="-1000" Maximum="1000" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=PositionXSlider, Path=Value, StringFormat={}{0:F2}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="ArrowUp" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="PositionYSlider" Minimum="-1000" Maximum="3000" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=PositionYSlider, Path=Value, StringFormat={}{0:F2}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="ArrowDown" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="PositionZSlider" Minimum="-1000" Maximum="1000" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=PositionZSlider, Path=Value, StringFormat={}{0:F2}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                </StackPanel>
                            </GroupBox>

                            <!-- Rotation -->
                            <GroupBox Style="{StaticResource SettingsGroupBoxStyle}" Margin="0,0,0,10">
                                <GroupBox.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Rotation"/>
                                        <Button Grid.Column="1" x:Name="ResetRotationButton" Style="{StaticResource TransparentIconButton}" ToolTip="Reset Rotation" Click="ResetRotation_Click">
                                            <materialIcons:MaterialIcon Kind="Refresh" Width="14" Height="14"/>
                                        </Button>
                                    </Grid>
                                </GroupBox.Header>
                                <StackPanel>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="Rotate3d" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="RotationXSlider" Minimum="-360" Maximum="360" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=RotationXSlider, Path=Value, StringFormat={}{0:F0}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="Rotate3d" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="RotationYSlider" Minimum="-360" Maximum="360" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=RotationYSlider, Path=Value, StringFormat={}{0:F0}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="Rotate3d" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="RotationZSlider" Minimum="-360" Maximum="360" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=RotationZSlider, Path=Value, StringFormat={}{0:F0}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                </StackPanel>
                            </GroupBox>

                            <!-- Scale -->
                            <GroupBox Style="{StaticResource SettingsGroupBoxStyle}">
                                <GroupBox.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Scale"/>
                                        <Button Grid.Column="1" x:Name="ResetScaleButton" Style="{StaticResource TransparentIconButton}" ToolTip="Reset Scale" Click="ResetScale_Click">
                                            <materialIcons:MaterialIcon Kind="Refresh" Width="14" Height="14"/>
                                        </Button>
                                    </Grid>
                                </GroupBox.Header>
                                <StackPanel>
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="60"/>
                                        </Grid.ColumnDefinitions>
                                        <materialIcons:MaterialIcon Grid.Column="0" Kind="Resize" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="{StaticResource TextPrimary}"/>
                                        <Slider Grid.Column="1" x:Name="ScaleSlider" Minimum="0.1" Maximum="5" Value="1" ValueChanged="TransformSlider_ValueChanged"/>
                                        <TextBlock Grid.Column="2" Text="{Binding ElementName=ScaleSlider, Path=Value, StringFormat={}{0:F2}}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" Foreground="{StaticResource TextMuted}"/>
                                    </Grid>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>
            </TabControl>
            
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                <Button x:Name="LoadModelButton"
                        Style="{StaticResource SecondaryButton}"
                        Click="LoadModelButton_Click"
                        ToolTip="Load Model">
                    <materialIcons:MaterialIcon x:Name="LoadModelIcon" Kind="CubeOutline" Width="18" Height="18"/>
                </Button>

                <Button x:Name="LoadChromaModelButton"
                        Style="{StaticResource SecondaryButton}"
                        Click="LoadChromaModelButton_Click"
                        ToolTip="Load Chroma Model"
                        Margin="10,0,0,0">
                    <materialIcons:MaterialIcon x:Name="LoadChromaModelIcon" Kind="Palette" Width="18" Height="18"/>
                </Button>

                <Button x:Name="LoadAnimationButton"
                        Style="{StaticResource SecondaryButton}"
                        Click="LoadAnimationButton_Click"
                        ToolTip="Load Animations"
                        Margin="10,0,0,0">
                    <materialIcons:MaterialIcon Kind="AnimationPlay" Width="18" Height="18"/>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>