<UserControl x:Class="AssetsManager.Views.HomeWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:converters="clr-namespace:AssetsManager.Views.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1100">
    <UserControl.Resources>
        
        <!-- Premium Dashboard Tile Style -->
        <Style x:Key="DashboardTileStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="RootGrid" RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <TranslateTransform X="0" Y="0"/>
                            </Grid.RenderTransform>
                            
                            <!-- 1. Glow Layer -->
                            <Border x:Name="GlowBorder" CornerRadius="12" Opacity="0" IsHitTestVisible="False">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding Tag.Color, RelativeSource={RelativeSource TemplatedParent}}"/>
                                </Border.Background>
                                <Border.Effect>
                                    <BlurEffect Radius="20"/>
                                </Border.Effect>
                            </Border>

                            <!-- 2. Background Layer -->
                            <Border x:Name="BackgroundBorder" 
                                    Background="{TemplateBinding Background}" 
                                    CornerRadius="12"/>

                            <!-- 3. Accent Strip Layer (Bottom Highlight) -->
                            <Border x:Name="AccentStrip" 
                                    BorderThickness="0,0,0,4"
                                    BorderBrush="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}"
                                    CornerRadius="12"
                                    Opacity="0.6"
                                    Margin="0"
                                    IsHitTestVisible="False"/>

                            <!-- 4. Content Layer (With Clipping) -->
                            <Border CornerRadius="12" ClipToBounds="True">
                                <ContentPresenter Margin="1"/>
                            </Border>

                            <!-- 5. Border Overlay -->
                            <Border x:Name="CardBorder"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="12"
                                    IsHitTestVisible="False"/>
                        </Grid>
                        
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="BackgroundBorder" Property="Background" Value="{StaticResource HoverColor}"/>
                                <Setter TargetName="CardBorder" Property="BorderBrush" Value="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}"/>
                                <Setter TargetName="CardBorder" Property="BorderThickness" Value="1.5"/>
                                <Setter TargetName="AccentStrip" Property="Opacity" Value="1"/>
                                <Setter TargetName="AccentStrip" Property="BorderThickness" Value="0,0,0,5"/>
                                <Setter TargetName="GlowBorder" Property="Opacity" Value="0.3"/> 
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.Y)" To="-4" Duration="0:0:0.2">
                                                <DoubleAnimation.EasingFunction><PowerEase EasingMode="EaseOut" Power="3"/></DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="(RenderTransform).(TranslateTransform.Y)" To="0" Duration="0:0:0.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <Grid>
        <!-- Background Pattern (Subtle) -->
        <Grid.Background>
            <RadialGradientBrush Center="0.5,0" RadiusX="1.0" RadiusY="1.0">
                <GradientStop Color="#08ffffff" Offset="0"/>
                <GradientStop Color="Transparent" Offset="1"/>
            </RadialGradientBrush>
        </Grid.Background>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="50,60,50,50">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Hero -->
                    <RowDefinition Height="Auto"/> <!-- Main Grid -->
                    <RowDefinition Height="Auto"/> <!-- Others Apps -->
                </Grid.RowDefinitions>

                <!-- 1. HERO SECTION -->
                <Grid Grid.Row="0" Margin="0,0,0,32">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Restored Icon Box -->
                        <Border Width="56" Height="56" Background="{StaticResource SidebarBackground}" CornerRadius="14" BorderBrush="{StaticResource BorderColor}" BorderThickness="1" Margin="0,0,20,0">
                            <materialIcons:MaterialIcon Kind="AutoFix" Width="28" Height="28" Foreground="{StaticResource AccentBrush}"/>
                        </Border>

                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="{Binding Greeting}" 
                                       FontSize="28" 
                                       FontWeight="Bold" 
                                       Foreground="{StaticResource TextPrimary}"
                                       Margin="0,0,0,2"/>
                            <TextBlock Text="What would you like to do today?" 
                                       FontSize="14" 
                                       Foreground="{StaticResource TextSecondary}"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <!-- 2. MAIN TOOLS GRID (Asymmetrical Layout) -->
                <Grid Grid.Row="1" Margin="0,0,0,24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1.5*"/> <!-- Large Card -->
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="180"/>
                        <RowDefinition Height="180"/>
                    </Grid.RowDefinitions>

                    <!-- Large Card: Explorer (Primary Task) -->
                    <Button Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Style="{StaticResource DashboardTileStyle}" Click="Button_Click" Tag="{StaticResource AccentBlue}">
                        <Button.CommandParameter>Explorer</Button.CommandParameter>
                        <Grid Margin="24">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Icon -->
                            <Border Width="56" Height="56" CornerRadius="16" Background="#1A4FC1FF" HorizontalAlignment="Left">
                                <materialIcons:MaterialIcon Kind="FolderSearchOutline" Width="32" Height="32" Foreground="{StaticResource AccentBlue}"/>
                            </Border>

                            <!-- Text -->
                            <StackPanel Grid.Row="1" VerticalAlignment="Center">
                                <TextBlock Text="File Explorer" FontSize="24" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                                <TextBlock Text="Deep dive into WAD archives. Preview audio, textures, and data." FontSize="14" Foreground="{StaticResource TextMuted}" TextWrapping="Wrap" LineHeight="20"/>
                            </StackPanel>
                            
                            <!-- Action Hint -->
                             <StackPanel Grid.Row="2" Orientation="Horizontal">
                                 <TextBlock Text="Open Browser" FontSize="12" FontWeight="Bold" Foreground="{StaticResource AccentBlue}" VerticalAlignment="Center"/>
                                 <materialIcons:MaterialIcon Kind="ArrowRight" Width="16" Height="16" Foreground="{StaticResource AccentBlue}" Margin="4,0,0,0"/>
                             </StackPanel>
                             
                             <!-- Background Deco -->
                            <materialIcons:MaterialIcon Grid.RowSpan="3" Kind="FolderMultipleOutline" Width="180" Height="180" Foreground="{StaticResource AccentBlue}" Opacity="0.03" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,-20,-20"/>
                        </Grid>
                    </Button>

                    <!-- Top Right: Comparator -->
                    <Button Grid.Row="0" Grid.Column="1" Style="{StaticResource DashboardTileStyle}" Click="Button_Click" Tag="{StaticResource AccentBrush}">
                        <Button.CommandParameter>Comparator</Button.CommandParameter>
                        <Grid Margin="20">
                            <Grid.ColumnDefinitions><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/></Grid.ColumnDefinitions>
                            <StackPanel VerticalAlignment="Center">
                                <Border Width="40" Height="40" CornerRadius="10" Background="#1A5577CC" HorizontalAlignment="Left" Margin="0,0,0,12">
                                    <materialIcons:MaterialIcon Kind="Compare" Width="22" Height="22" Foreground="{StaticResource AccentBrush}"/>
                                </Border>
                                <TextBlock Text="Comparator" FontSize="20" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                <TextBlock Text="{Binding LastComparisonText}" FontSize="12" Foreground="{StaticResource TextMuted}" Margin="0,4,0,0" TextWrapping="Wrap"/>
                            </StackPanel>
                            <materialIcons:MaterialIcon Grid.Column="1" Kind="Compare" Width="80" Height="80" Foreground="{StaticResource AccentBrush}" Opacity="0.05" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,-10,-10"/>
                        </Grid>
                    </Button>

                    <!-- Bottom Right: Monitor & Models Split -->
                    <Grid Grid.Row="1" Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Monitor -->
                        <Button Grid.Column="0" Style="{StaticResource DashboardTileStyle}" Click="Button_Click" Tag="{StaticResource AccentGreen}">
                            <Button.CommandParameter>Monitor</Button.CommandParameter>
                            <Grid Margin="16">
                                <StackPanel VerticalAlignment="Center">
                                     <materialIcons:MaterialIcon Kind="Radar" Width="28" Height="28" Foreground="{StaticResource AccentGreen}" HorizontalAlignment="Left" Margin="0,0,0,12"/>
                                    <TextBlock Text="Monitor" FontSize="16" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                    <TextBlock Text="{Binding MonitorSummary}" FontSize="11" Foreground="{StaticResource TextMuted}" Margin="0,4,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>
                        
                        <!-- Models -->
                        <Button Grid.Column="1" Style="{StaticResource DashboardTileStyle}" Click="Button_Click" Tag="{StaticResource AccentPurple}">
                            <Button.CommandParameter>Models</Button.CommandParameter>
                            <Grid Margin="16">
                                <StackPanel VerticalAlignment="Center">
                                     <materialIcons:MaterialIcon Kind="CubeOutline" Width="28" Height="28" Foreground="{StaticResource AccentPurple}" HorizontalAlignment="Left" Margin="0,0,0,12"/>
                                    <TextBlock Text="3D Viewer" FontSize="16" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                    <TextBlock Text="View models, particles &amp; maps" FontSize="11" Foreground="{StaticResource TextMuted}" Margin="0,4,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </Button>
                    </Grid>
                </Grid>

                <!-- 3. OTHERS APPS SECTION -->
                <StackPanel Grid.Row="2">
                    <TextBlock Text="OTHERS APPS" Style="{StaticResource ToolSectionLabel}" Margin="8,0,0,12"/>
                    <StackPanel Orientation="Horizontal">
                        <!-- Notepad -->
                        <Button Width="200" Height="100" Style="{StaticResource DashboardTileStyle}" Click="Notepad_Click" Tag="{StaticResource AccentOrange}" Margin="0,0,8,0">
                            <Grid Margin="16">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Border Width="36" Height="36" CornerRadius="10" Background="#1AFF9100" Margin="0,0,12,0">
                                        <materialIcons:MaterialIcon Kind="NoteTextOutline" Width="20" Height="20" Foreground="{StaticResource AccentOrange}"/>
                                    </Border>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="Notepad" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                        <TextBlock Text="Quick notes" FontSize="11" Foreground="{StaticResource TextMuted}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Button>

                        <!-- Audio Player -->
                        <Button Width="200" Height="100" Style="{StaticResource DashboardTileStyle}" Click="AudioPlayer_Click" Tag="{StaticResource AccentBlue}" Margin="8,0,8,0">
                            <Grid Margin="16">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                    <Border Width="36" Height="36" CornerRadius="10" Background="#1A4FC1FF" Margin="0,0,12,0">
                                        <materialIcons:MaterialIcon Kind="Waveform" Width="20" Height="20" Foreground="{StaticResource AccentBlue}"/>
                                    </Border>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="Audio Player" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                        <TextBlock Text="Session playlist" FontSize="11" Foreground="{StaticResource TextMuted}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>
